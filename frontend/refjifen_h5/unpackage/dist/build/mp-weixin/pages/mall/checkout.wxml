<view class="container"><view data-event-opts="{{[['tap',[['selectAddress',['$event']]]]]}}" class="address-box" bindtap="__e"><block wx:if="{{address}}"><view class="addr-info"><view class="addr-user"><text class="name">{{address.name}}</text><text class="mobile">{{address.mobile}}</text></view><view class="addr-detail">{{address.province+" "+address.city+" "+address.district+" "+address.detail}}</view></view></block><block wx:else><view class="addr-empty"><text>请选择收货地址</text><text class="iconfont icon-right"></text></view></block><view class="addr-line"></view></view><view class="order-list"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="id"><view class="product-item"><image class="p-img" src="{{item.g0[0]}}" mode="aspectFill"></image><view class="p-info"><view class="p-title">{{item.$orig.title}}</view><view class="p-meta"><block wx:if="{{cart.zone=='A'}}"><view class="p-price">{{"¥"+item.m0}}<text class="p-unit">{{"/"+(item.$orig.unit||'件')}}</text></view></block><block wx:else><view class="p-price" style="color:#ff9800;">{{item.m1}}<text class="p-unit" style="color:#ffcc80;">{{"券/"+(item.$orig.unit||'件')}}</text></view></block><view class="p-qty">{{"x "+item.$orig.qty+item.$orig.unit}}</view></view></view></view></block></view><view class="cell-group"><view class="cell-item"><text class="label">备注</text><input class="input" placeholder="选填，请先和商家协商一致" data-event-opts="{{[['input',[['__set_model',['','remark','$event',[]]]]]]}}" value="{{remark}}" bindinput="__e"/></view></view><view class="footer-bar"><view class="total-info"><text>合计:</text><block wx:if="{{cart.zone=='A'}}"><text class="total-price">{{"¥"+totalPrice}}</text></block><block wx:else><text class="total-price">{{totalPrice+"券"}}</text></block></view><block wx:if="{{cart.zone=='A'&&estPoints>0}}"><view class="est-points"><text>{{"预估赠送: "+estPoints+" ("+estRatio+"倍)"}}</text></view></block><view data-event-opts="{{[['tap',[['prePay',['$event']]]]]}}" class="pay-btn" bindtap="__e">立即支付</view></view><block wx:if="{{showPwd}}"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="pwd-mask" bindtap="__e"></view></block><block wx:if="{{showPwd}}"><view class="pwd-modal"><view class="pwd-title">输入支付密码</view><input class="pwd-input" type="password" focus="{{true}}" maxlength="6" placeholder="请输入6位支付密码" data-event-opts="{{[['input',[['__set_model',['','password','$event',[]]]]]]}}" value="{{password}}" bindinput="__e"/><view class="pwd-btns"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="btn cancel" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['doPay',['$event']]]]]}}" class="btn confirm" bindtap="__e">确定</view></view></view></block></view>