(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/accounts"],{"0d2f":function(t,e,n){},"27d7":function(t,e,n){"use strict";n.r(e);var a=n("7e44"),c=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=c.a},"526e":function(t,e,n){"use strict";var a=n("0d2f"),c=n.n(a);c.a},"7e44":function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=a(n("7eb4")),r=a(n("ee10")),i={data:function(){return{accounts:[],redirect:""}},onLoad:function(t){this.redirect=t.redirect||""},onShow:function(){this.loadAccounts()},methods:{loadAccounts:function(){var e=this;return(0,r.default)(c.default.mark((function n(){var a;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.showLoading({title:"加载中"}),n.prev=1,n.next=4,t.$api("auth.php?action=list_accounts");case 4:a=n.sent,t.hideLoading(),200==a.code&&(e.accounts=a.data),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),t.hideLoading();case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},maskMobile:function(t){return t?t.substr(0,3)+"****"+t.substr(7):""},switchAcc:function(e){var n=this;return(0,r.default)(c.default.mark((function a(){var r;return c.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.is_current){a.next=2;break}return a.abrupt("return");case 2:return t.showLoading({title:"切换中..."}),a.prev=3,a.next=6,t.$api("auth.php?action=quick_login","POST",{target_id:e.id});case 6:r=a.sent,t.hideLoading(),200==r.code?(t.setStorageSync("token",r.token),t.showToast({title:"切换成功",icon:"success"}),setTimeout((function(){var e=n.redirect?decodeURIComponent(n.redirect):"/pages/my/my";t.reLaunch({url:e})}),1e3)):t.showToast({title:r.message,icon:"none"}),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](3),t.hideLoading();case 14:case"end":return a.stop()}}),a,null,[[3,11]])})))()},addAccount:function(){var e=this;t.showActionSheet({itemList:["激活子账号","注册新账号"],success:function(n){0==n.tapIndex?e.triggerActivate():t.navigateTo({url:"/pages/login/register"})}})},triggerActivate:function(){var e=this;t.showModal({title:"激活子账号",editable:!0,placeholderText:"设置子账号密码",success:function(){var t=(0,r.default)(c.default.mark((function t(n){return c.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.confirm&&n.content&&e.doActivate(n.content);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})},doActivate:function(e){var n=this;return(0,r.default)(c.default.mark((function a(){var r,i,o;return c.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.showLoading({title:"激活中"}),a.prev=1,a.next=4,t.$api("account.php?action=info");case 4:if(r=a.sent,200==r.code){a.next=7;break}return a.abrupt("return");case 7:return i=r.data.mobile,a.next=10,t.$api("account.php?action=activate_sub","POST",{sub_mobile:i,password:e,position:"L"});case 10:o=a.sent,t.hideLoading(),200==o.code?(t.showToast({title:"激活成功",icon:"success"}),n.loadAccounts()):t.showToast({title:o.message,icon:"none"}),a.next=18;break;case 15:a.prev=15,a.t0=a["catch"](1),t.hideLoading();case 18:case"end":return a.stop()}}),a,null,[[1,15]])})))()}}};e.default=i}).call(this,n("df3c")["default"])},"7e76":function(t,e,n){"use strict";n.r(e);var a=n("d1f7"),c=n("27d7");for(var r in c)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return c[t]}))}(r);n("526e");var i=n("828b"),o=Object(i["a"])(c["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=o.exports},ac74:function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("a82b");a(n("3240"));var c=a(n("7e76"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(c.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},d1f7:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.accounts,(function(e,n){var a=t.__get_orig(e),c=t.maskMobile(e.mobile);return{$orig:a,m0:c}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},c=[]}},[["ac74","common/runtime","common/vendor"]]]);