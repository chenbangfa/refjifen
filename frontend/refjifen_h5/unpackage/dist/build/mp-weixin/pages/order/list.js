(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/list"],{"3ba8":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={tabBar:function(){return n.e("components/tab-bar/tab-bar").then(n.bind(null,"a372"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.list,(function(e,n){var a=t.__get_orig(e),o=t.getStatusText(e.status),r=t.__map(e.goods_list,(function(e,n){var a=t.__get_orig(e),o=e.image.split(",");return{$orig:a,g0:o}})),i=[1,2].includes(parseInt(e.status)),s=["3","4"].includes(e.status);return{$orig:a,m0:o,l0:r,g1:i,g2:s}}))),a=0===t.list.length&&!t.loading;t.$mp.data=Object.assign({},{$root:{l1:n,g3:a}})},r=[]},"3bf0":function(t,e,n){"use strict";n.r(e);var a=n("3ba8"),o=n("52ea");for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("7be4");var i=n("828b"),s=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=s.exports},"52ea":function(t,e,n){"use strict";n.r(e);var a=n("e730"),o=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},"5ee4":function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("a82b");a(n("3240"));var o=a(n("3bf0"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"7be4":function(t,e,n){"use strict";var a=n("ce92"),o=n.n(a);o.a},ce92:function(t,e,n){},e730:function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("7eb4")),r=a(n("ee10")),i={components:{tabBar:function(){n.e("components/tab-bar/tab-bar").then(function(){return resolve(n("a372"))}.bind(null,n)).catch(n.oe)}},data:function(){return{status:"",list:[],page:1,loading:!1,hasMore:!0}},onLoad:function(t){"undefined"!==typeof t.status&&(this.status=t.status)},onShow:function(){this.page=1,this.list=[],this.hasMore=!0,this.loadData()},methods:{switchStatus:function(t){this.status!==t&&(this.status=t,this.page=1,this.list=[],this.hasMore=!0,this.loadData())},loadData:function(){var e=this;return(0,r.default)(o.default.mark((function n(){var a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.loading&&e.hasMore){n.next=2;break}return n.abrupt("return");case 2:return e.loading=!0,n.prev=3,n.next=6,t.$api("mall.php?action=my_orders&status=".concat(e.status,"&page=").concat(e.page));case 6:a=n.sent,200==a.code&&(1==e.page?e.list=a.data:e.list=e.list.concat(a.data),a.data.length<10?e.hasMore=!1:e.page++),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](3);case 12:return n.prev=12,e.loading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[3,10,12,15]])})))()},getStatusText:function(t){return{0:"待付款",1:"待发货",2:"待收货",3:"已完成",4:"已取消",5:"退款中"}[t]||"未知状态"},goDetail:function(e){t.navigateTo({url:"/pages/order/detail?id=".concat(e)})},payOrder:function(e){t.navigateTo({url:"/pages/mall/pay?order_id=".concat(e.id)})},cancelOrder:function(e){t.showModal({title:"提示",content:"确定要取消订单吗？",success:function(t){t.confirm}})},confirmReceipt:function(e){var n=this;t.showModal({title:"提示",content:"确认已收到货？",success:function(){var a=(0,r.default)(o.default.mark((function a(r){var i;return o.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r.confirm){a.next=14;break}return t.showLoading({title:"处理中"}),a.prev=2,a.next=5,t.$api("mall.php?action=confirm_receipt","POST",{id:e.id});case 5:i=a.sent,t.hideLoading(),200==i.code?(t.showToast({title:"确认成功"}),n.page=1,n.list=[],n.hasMore=!0,n.loadData()):t.showToast({title:i.message||"操作失败",icon:"none"}),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](2),t.hideLoading(),t.showToast({title:"网络错误",icon:"none"});case 14:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(t){return a.apply(this,arguments)}}()})},applyRefund:function(e){t.navigateTo({url:"/pages/order/refund?order_sn=".concat(e.order_sn)})},cancelRefund:function(e){var n=this;t.showModal({title:"提示",content:"确定撤销售后申请吗？",success:function(){var a=(0,r.default)(o.default.mark((function a(r){var i;return o.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r.confirm){a.next=14;break}return t.showLoading({title:"处理中"}),a.prev=2,a.next=5,t.$api("mall.php?action=cancel_refund","POST",{order_sn:e.order_sn});case 5:i=a.sent,t.hideLoading(),200==i.code?(t.showToast({title:"已撤销"}),n.page=1,n.list=[],n.hasMore=!0,n.loadData()):t.showToast({title:i.message||"操作失败",icon:"none"}),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](2),t.hideLoading(),t.showToast({title:"网络错误",icon:"none"});case 14:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(t){return a.apply(this,arguments)}}()})},loadMore:function(){this.loadData()}}};e.default=i}).call(this,n("df3c")["default"])}},[["5ee4","common/runtime","common/vendor"]]]);