<view class="container"><view class="top-controls"><block wx:if="{{team.id&&team.parent_id>0}}"><view data-event-opts="{{[['tap',[['loadTeam',['$0'],['team.parent_id']]]]]}}" class="ctrl-btn back-parent" bindtap="__e">返回上级</view></block><block wx:if="{{team.id&&team.id!=myUserId}}"><view data-event-opts="{{[['tap',[['loadTeam',['$0'],['myUserId']]]]]}}" class="ctrl-btn back-top" bindtap="__e">返回我的</view></block></view><view class="tree-scroll-view"><block wx:if="{{team&&team.id}}"><tree-chart vue-id="31653dff-1" node="{{team}}" isRoot="{{true}}" data-event-opts="{{[['^click',[['onNodeClick']]]]}}" bind:click="__e" bind:__l="__l"></tree-chart></block><block wx:else><view class="loading-txt">加载中...</view></block></view><block wx:if="{{$root.g0>0}}"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="float-btn" bindtap="__e"><view class="float-txt">待安置</view><view class="float-num">{{$root.g1}}</view></view></block><block wx:if="{{showPendingModal}}"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="modal-overlay" bindtap="__e"><view class="modal-card"><view class="modal-header">待安置列表</view><scroll-view class="modal-body list-body" scroll-y="{{true}}"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['openPlaceForm',['$0'],[[['pendingList','id',item.$orig.id]]]]]]]}}" class="pending-item" bindtap="__e"><view class="p-row"><text class="p-name">{{(item.$orig.nickname||'未命名')+" (ID: "+item.$orig.id+")"}}</text><text class="p-btn">安置</text></view><view class="p-info">{{"手机: "+item.$orig.mobile}}</view><view class="p-info">{{"注册: "+item.g2}}</view></view></block></scroll-view><view class="modal-footer"><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="m-btn cancel" bindtap="__e">关闭</view></view></view></view></block><block wx:if="{{showPlaceForm}}"><view data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" class="modal-overlay" bindtap="__e"><view class="modal-card"><view class="modal-header">安置用户</view><view class="modal-body"><view class="form-uinfo"> 正在安置: <text style="color:#1890ff;font-weight:bold;">{{currentPending.nickname+" (ID: "+currentPending.id+")"}}</text></view><view class="form-label">上级ID (Parent ID)</view><input class="form-input" type="number" placeholder="请输入要放置的上级ID" data-event-opts="{{[['input',[['__set_model',['$0','parentId','$event',[]],['placeForm']]]]]}}" value="{{placeForm.parentId}}" bindinput="__e"/><view class="form-label">放置区域 (Position)</view><radio-group data-event-opts="{{[['change',[['e4',['$event']]]]]}}" class="form-radio-group" bindchange="__e"><label class="radio-label"><radio value="L" checked="{{placeForm.position==='L'}}" color="#1890ff"></radio> 左区 (Left) </label><label class="radio-label"><radio value="R" checked="{{placeForm.position==='R'}}" color="#1890ff"></radio> 右区 (Right) </label></radio-group></view><view class="modal-footer"><view data-event-opts="{{[['tap',[['e5',['$event']]]]]}}" class="m-btn cancel" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['submitPlacement',['$event']]]]]}}" class="m-btn confirm" bindtap="__e">确认安置</view></view></view></view></block><tab-bar vue-id="31653dff-2" current="pages/team/tree" bind:__l="__l"></tab-bar></view>