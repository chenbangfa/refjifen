(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mall-search"],{"142b":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("0c26"),a("fd3c"),a("9db6");var n=i(a("2634")),s=i(a("2fdc")),o={data:function(){return{keyword:"",list:[],searched:!1,apiBase:"https://ref.tajian.cc"}},onLoad:function(t){t.keyword&&(this.keyword=t.keyword,this.doSearch())},methods:{doSearch:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.keyword.trim()){e.next=2;break}return e.abrupt("return");case 2:return uni.showLoading({title:"搜索中..."}),t.searched=!1,e.prev=4,e.next=7,uni.$api("mall.php?action=products&search=".concat(encodeURIComponent(t.keyword)));case 7:a=e.sent,uni.hideLoading(),200==a.code&&(t.list=a.data.map((function(e){return e.image&&e.image.startsWith("/")&&(e.image=t.apiBase+e.image),e})),t.searched=!0),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](4),uni.hideLoading(),uni.showToast({title:"搜索失败",icon:"none"});case 16:case"end":return e.stop()}}),e,null,[[4,12]])})))()},goDetail:function(t){uni.navigateTo({url:"/pages/mall/product?id=".concat(t.id)})}}};e.default=o},"3b25":function(t,e,a){"use strict";a.r(e);var i=a("142b"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"4a29":function(t,e,a){var i=a("8087");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("372c04a2",i,!0,{sourceMap:!1,shadowMode:!1})},"5fc7":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"search-bar"},[a("v-uni-view",{staticClass:"search-box"},[a("v-uni-text",{staticClass:"iconfont icon-search"}),a("v-uni-input",{attrs:{type:"text",placeholder:"搜索商品",focus:!0,"confirm-type":"search"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.doSearch.apply(void 0,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1),t.list.length>0?a("v-uni-view",{staticClass:"result-area"},[a("v-uni-view",{staticClass:"product-grid"},t._l(t.list,(function(e){return a("v-uni-view",{key:e.id,staticClass:"product-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goDetail(e)}}},[a("v-uni-image",{staticClass:"p-img",attrs:{src:e.image?e.image.startsWith("http")?e.image:t.apiBase+e.image.split(",")[0]:"",mode:"aspectFill"}}),a("v-uni-view",{staticClass:"p-info"},[a("v-uni-view",{staticClass:"p-title"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"p-meta"},[a("v-uni-view",{staticClass:"p-price",style:{color:"B"==e.zone?"#ff9800":"#07C160"}},[t._v(" "+t._s(parseFloat(e.price))+" "),"B"==e.zone?a("v-uni-text",{staticClass:"p-unit",staticStyle:{color:"#ffcc80"}},[t._v("券/"+t._s(e.unit||"件"))]):a("v-uni-text",{staticClass:"p-unit"},[t._v("/"+t._s(e.unit||"件"))])],1),a("v-uni-view",{staticClass:"p-sales"},[t._v("已售"+t._s(e.sales))])],1)],1)],1)})),1)],1):t.searched?a("v-uni-view",{staticClass:"empty-state"},[a("v-uni-text",{staticClass:"iconfont icon-empty",staticStyle:{"font-size":"48px",color:"#ddd"}}),a("v-uni-text",{staticStyle:{color:"#999","margin-top":"10px"}},[t._v("未找到相关商品")])],1):t._e()],1)},n=[]},8087:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".container[data-v-26096794]{padding:10px;background:#f5f5f5;min-height:100vh;box-sizing:border-box}.search-bar[data-v-26096794]{position:-webkit-sticky;position:sticky;top:0;z-index:99;background:#fff;margin:-10px -10px 10px -10px;padding:10px 15px;box-shadow:0 2px 5px rgba(0,0,0,.05)}.search-box[data-v-26096794]{background:#f0f0f0;border-radius:20px;height:35px;display:flex;align-items:center;padding:0 15px}.icon-search[data-v-26096794]{color:#999;margin-right:5px}.search-box uni-input[data-v-26096794]{flex:1;font-size:14px}.product-grid[data-v-26096794]{display:flex;flex-wrap:wrap;justify-content:space-between}.product-item[data-v-26096794]{width:48.5%;background:#fff;border-radius:8px;margin-bottom:10px;overflow:hidden;border:1px solid #f9f9f9}.p-img[data-v-26096794]{width:100%;height:150px;background:#f5f5f5}.p-info[data-v-26096794]{padding:8px}.p-title[data-v-26096794]{font-size:14px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:5px;font-weight:700}.p-meta[data-v-26096794]{display:flex;justify-content:space-between;align-items:flex-end}.p-price[data-v-26096794]{font-size:16px;font-weight:700;line-height:1}.p-sales[data-v-26096794]{font-size:10px;color:#bbb}.p-unit[data-v-26096794]{font-size:12px;color:#ccc;font-weight:400;margin-left:1px}.empty-state[data-v-26096794]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:100px}",""]),t.exports=e},ce20:function(t,e,a){"use strict";var i=a("4a29"),n=a.n(i);n.a},dc9a:function(t,e,a){"use strict";a.r(e);var i=a("5fc7"),n=a("3b25");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("ce20");var o=a("828b"),c=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"26096794",null,!1,i["a"],void 0);e["default"]=c.exports}}]);