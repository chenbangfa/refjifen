(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mall-product"],{"0dba":function(t,a,i){"use strict";i.r(a);var e=i("d771"),n=i.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(o);a["default"]=n.a},"6f13":function(t,a,i){var e=i("c86c");a=e(!1),a.push([t.i,".container[data-v-127ac0e5]{padding:10px;padding-bottom:80px;background:#f8f8f8;min-height:100vh;box-sizing:border-box}.p-image[data-v-127ac0e5]{width:100%;height:375px;background:#fff;border-radius:12px;margin-bottom:10px}.info-card[data-v-127ac0e5]{background:#fff;padding:15px;margin-bottom:10px;border-radius:12px}.price-row[data-v-127ac0e5]{display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:10px}.price[data-v-127ac0e5]{color:#ff4d4f;font-size:14px;font-weight:700}.price .num[data-v-127ac0e5]{font-size:24px}.stock[data-v-127ac0e5]{color:#999;font-size:12px}.title[data-v-127ac0e5]{font-size:16px;font-weight:700;color:#333;line-height:1.4;margin-bottom:10px}.sales[data-v-127ac0e5]{color:#999;font-size:12px}.detail-card[data-v-127ac0e5]{background:#fff;padding:15px;min-height:200px;border-radius:12px}.section-title[data-v-127ac0e5]{font-size:15px;font-weight:700;margin-bottom:15px;padding-left:10px;border-left:3px solid #07c160}.bottom-bar[data-v-127ac0e5]{position:fixed;bottom:0;left:0;width:100%;height:60px;background:#fff;display:flex;align-items:center;justify-content:space-between;padding:0 10px;box-shadow:0 -2px 10px rgba(0,0,0,.05);box-sizing:border-box}.bar-btn[data-v-127ac0e5]{flex:1;height:40px;line-height:40px;text-align:center;border-radius:20px;font-size:14px;color:#fff;margin:0 5px}.bar-btn.cart[data-v-127ac0e5]{background:#ff9800}.bar-btn.buy[data-v-127ac0e5]{background:#ff4d4f}.p-unit[data-v-127ac0e5]{font-size:12px;color:#ccc;font-weight:400;margin-left:1px;vertical-align:bottom}",""]),t.exports=a},7030:function(t,a,i){"use strict";i.d(a,"b",(function(){return e})),i.d(a,"c",(function(){return n})),i.d(a,"a",(function(){}));var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticClass:"container"},[i("v-uni-image",{staticClass:"p-image",attrs:{src:t.product.image?t.product.image.split(",")[0]:"",mode:"aspectFill"}}),i("v-uni-view",{staticClass:"info-card"},[i("v-uni-view",{staticClass:"price-row"},["A"==t.product.zone?i("v-uni-view",{staticClass:"price"},[t._v("¥"),i("v-uni-text",{staticClass:"num"},[t._v(t._s(t.fmt(t.product.price)))]),i("v-uni-text",{staticClass:"p-unit"},[t._v("/"+t._s(t.product.unit||"件"))])],1):i("v-uni-view",{staticClass:"price"},[i("v-uni-text",{staticClass:"num"},[t._v(t._s(t.fmt(t.product.price)))]),i("v-uni-text",{staticClass:"p-unit",staticStyle:{"font-size":"12px",color:"#ccc","font-weight":"normal"}},[t._v("/"+t._s(t.product.unit||"件"))]),t._v(" 券")],1),i("v-uni-view",{staticClass:"stock"},[t._v("库存: "+t._s(t.product.stock))])],1),i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.product.title))]),i("v-uni-view",{staticClass:"sales"},[t._v("已售 "+t._s(t.product.sales)+t._s(t.product.unit))])],1),i("v-uni-view",{staticClass:"detail-card"},[i("v-uni-view",{staticClass:"section-title"},[t._v("商品详情")]),i("v-uni-rich-text",{attrs:{nodes:t.product.description||"<p>暂无详情</p>"}})],1),i("v-uni-view",{staticClass:"bottom-bar"},[i("v-uni-view",{staticClass:"bar-btn cart",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addToCart.apply(void 0,arguments)}}},[t._v("加入购物车")]),i("v-uni-view",{staticClass:"bar-btn buy",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.buyNow.apply(void 0,arguments)}}},[t._v("立即购买")])],1)],1)},n=[]},a2a9:function(t,a,i){"use strict";i.r(a);var e=i("7030"),n=i("0dba");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(o);i("c17c");var c=i("828b"),r=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"127ac0e5",null,!1,e["a"],void 0);a["default"]=r.exports},a6bc:function(t,a,i){var e=i("6f13");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("967d").default;n("b663eea6",e,!0,{sourceMap:!1,shadowMode:!1})},c17c:function(t,a,i){"use strict";var e=i("a6bc"),n=i.n(e);n.a},d771:function(t,a,i){"use strict";i("6a54");var e=i("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e(i("9b1b")),o=e(i("2634")),c=e(i("2fdc"));i("e838"),i("01a2"),i("e39c"),i("5c47"),i("a1c1"),i("aa77"),i("bf0f"),i("aa9c");var r={data:function(){return{id:0,product:{}}},onLoad:function(t){this.id=t.id||0,this.loadProduct()},methods:{fmt:function(t){return parseFloat(t||0).toFixed(2)},loadProduct:function(){var t=this;return(0,c.default)((0,o.default)().mark((function a(){var i;return(0,o.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return uni.showLoading({title:"加载中"}),a.next=3,uni.$api("mall.php?action=product_detail&id="+t.id);case 3:i=a.sent,uni.hideLoading(),200==i.code?(t.product=i.data,t.product.description&&(t.product.description=t.product.description.replace(/\<img/gi,'<img style="max-width:100% !important;height:auto;display:block;"'))):uni.showToast({title:i.message,icon:"none"});case 6:case"end":return a.stop()}}),a)})))()},addToCart:function(){var t=this,a="cart_"+this.product.zone,i=uni.getStorageSync(a)||[],e=i.find((function(a){return a.id==t.product.id}));e?e.qty++:i.push((0,n.default)((0,n.default)({},this.product),{},{qty:1})),uni.setStorageSync(a,i),uni.showToast({title:"已加入购物车",icon:"success"}),setTimeout((function(){uni.reLaunch({url:"/pages/mall/category?zone=".concat(t.product.zone)})}),800)},buyNow:function(){var t=[(0,n.default)((0,n.default)({},this.product),{},{qty:1})];uni.setStorageSync("checkout_cart",{zone:this.product.zone,items:t}),uni.navigateTo({url:"/pages/mall/checkout"})}}};a.default=r}}]);