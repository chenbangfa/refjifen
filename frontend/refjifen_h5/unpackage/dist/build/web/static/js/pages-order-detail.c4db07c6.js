(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-detail"],{"0550":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"header-status"},[a("v-uni-view",{staticClass:"status-title"},[t._v(t._s(t.statusText))]),a("v-uni-view",{staticClass:"status-desc"},[t._v(t._s(t.statusDesc))])],1),t.order.after_sales_info?a("v-uni-view",{staticClass:"card as-card",staticStyle:{"margin-top":"-30px",position:"relative","z-index":"2"}},[a("v-uni-view",{staticClass:"as-title"},[t._v("售后进度")]),a("v-uni-view",{staticClass:"info-row"},[a("v-uni-text",{staticClass:"label"},[t._v("售后状态")]),a("v-uni-text",{staticClass:"value status-text"},[t._v(t._s(t.getRefundStatus(t.order.after_sales_info.status)))])],1),a("v-uni-view",{staticClass:"info-row"},[a("v-uni-text",{staticClass:"label"},[t._v("售后类型")]),a("v-uni-text",{staticClass:"value"},[t._v(t._s(1==t.order.after_sales_info.type?"仅退款":"退货退款"))])],1),a("v-uni-view",{staticClass:"info-row"},[a("v-uni-text",{staticClass:"label"},[t._v("申请原因")]),a("v-uni-text",{staticClass:"value"},[t._v(t._s(t.order.after_sales_info.reason))])],1),t.order.after_sales_info.admin_reply?a("v-uni-view",{staticClass:"info-row"},[a("v-uni-text",{staticClass:"label"},[t._v("商家回复")]),a("v-uni-text",{staticClass:"value highlight"},[t._v(t._s(t.order.after_sales_info.admin_reply))])],1):t._e(),t.order.after_sales_info.images?a("v-uni-view",{staticClass:"as-imgs"},t._l(t.order.after_sales_info.images.split(","),(function(e,i){return a("v-uni-image",{key:i,attrs:{src:e,mode:"aspectFill"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.previewImage(e)}}})})),1):t._e(),0==t.order.after_sales_info.status?a("v-uni-view",{staticClass:"as-actions"},[a("v-uni-view",{staticClass:"btn outline small",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelRefund.apply(void 0,arguments)}}},[t._v("取消售后")])],1):t._e()],1):t._e(),t.order.status>=2?a("v-uni-view",{staticClass:"card logistics-card",style:{marginTop:t.order.after_sales_info?"10px":"-30px"}},[a("v-uni-view",{staticClass:"l-icon"},[a("v-uni-text",{staticClass:"iconfont icon-delivery"})],1),a("v-uni-view",{staticClass:"l-info"},[a("v-uni-view",{staticClass:"l-company"},[t._v("快递公司: "+t._s(t.order.express_company||"未知"))]),a("v-uni-view",{staticClass:"l-no"},[t._v("快递单号: "+t._s(t.order.tracking_number||"暂无"))]),t.order.delivery_time?a("v-uni-view",{staticClass:"l-time"},[t._v("发货时间: "+t._s(t.order.delivery_time))]):t._e()],1)],1):t._e(),a("v-uni-view",{staticClass:"card address-card"},[a("v-uni-view",{staticClass:"a-icon"},[a("v-uni-text",{staticClass:"iconfont icon-location"})],1),a("v-uni-view",{staticClass:"a-info"},[a("v-uni-view",{staticClass:"user-row"},[a("v-uni-text",{staticClass:"name"},[t._v(t._s(t.address.name))]),a("v-uni-text",{staticClass:"mobile"},[t._v(t._s(t.address.mobile))])],1),a("v-uni-view",{staticClass:"addr-text"},[t._v(" "+t._s(t.address.province||"")+" "+t._s(t.address.city||"")+" "+t._s(t.address.district||"")+" "+t._s(t.address.detail||t.address.address||"")+" ")])],1)],1),a("v-uni-view",{staticClass:"card goods-card"},[t._l(t.order.goods_list,(function(e,i){return a("v-uni-view",{key:i,staticClass:"goods-item"},[a("v-uni-image",{staticClass:"g-img",attrs:{src:e.image.split(",")[0],mode:"aspectFill"}}),a("v-uni-view",{staticClass:"g-info"},[a("v-uni-view",{staticClass:"g-title"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"g-meta"},["balance"==t.order.pay_type?a("v-uni-text",{staticClass:"g-price"},[t._v("¥"+t._s(parseFloat(e.price)))]):a("v-uni-text",{staticClass:"g-price"},[t._v(t._s(parseFloat(e.price))+"券")]),a("v-uni-text",{staticClass:"g-num"},[t._v("x"+t._s(e.num))])],1)],1)],1)})),a("v-uni-view",{staticClass:"goods-total"},[a("v-uni-text",[t._v("实付款:")]),"balance"==t.order.pay_type?a("v-uni-text",{staticClass:"price-big"},[t._v("¥"+t._s(t.order.total_price))]):a("v-uni-text",{staticClass:"price-big"},[t._v(t._s(t.order.total_price)+"券")])],1)],2),a("v-uni-view",{staticClass:"card order-info"},[a("v-uni-view",{staticClass:"info-row"},[a("v-uni-text",{staticClass:"label"},[t._v("订单编号")]),a("v-uni-text",{staticClass:"value"},[t._v(t._s(t.order.order_sn))])],1),a("v-uni-view",{staticClass:"info-row"},[a("v-uni-text",{staticClass:"label"},[t._v("下单时间")]),a("v-uni-text",{staticClass:"value"},[t._v(t._s(t.order.created_at))])],1),t.order.pay_time?a("v-uni-view",{staticClass:"info-row"},[a("v-uni-text",{staticClass:"label"},[t._v("支付时间")]),a("v-uni-text",{staticClass:"value"},[t._v(t._s(t.order.pay_time))])],1):t._e(),t.order.remark?a("v-uni-view",{staticClass:"info-row"},[a("v-uni-text",{staticClass:"label"},[t._v("买家留言")]),a("v-uni-text",{staticClass:"value"},[t._v(t._s(t.order.remark))])],1):t._e()],1),0==t.order.status||2==t.order.status?a("v-uni-view",{staticClass:"footer-actions"},[0==t.order.status?a("v-uni-view",{staticClass:"btn outline",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelOrder.apply(void 0,arguments)}}},[t._v("取消订单")]):t._e(),0==t.order.status?a("v-uni-view",{staticClass:"btn primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payOrder.apply(void 0,arguments)}}},[t._v("立即支付")]):t._e(),2==t.order.status?a("v-uni-view",{staticClass:"btn primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmReceipt.apply(void 0,arguments)}}},[t._v("确认收货")]):t._e()],1):t._e()],1)},s=[]},"200f":function(t,e,a){var i=a("9c49");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("967d").default;s("3c2e54dd",i,!0,{sourceMap:!1,shadowMode:!1})},"460f":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("2634")),n=i(a("2fdc")),o={data:function(){return{id:0,order:{},address:{}}},computed:{statusText:function(){return{0:"等待买家付款",1:"等待卖家发货",2:"卖家已发货",3:"交易成功",4:"交易关闭",5:"售后中"}[this.order.status]||""},statusDesc:function(){return{0:"剩23小时59分自动关闭",1:"您的包裹正在打包中",2:"您的包裹在路上了",3:"感谢您的支持",4:"订单已取消",5:"售后处理中"}[this.order.status]||""}},onLoad:function(t){this.id=t.id,this.loadDetail()},methods:{getRefundStatus:function(t){return["审核中","已同意","已拒绝","已取消"][t]||"未知"},cancelRefund:function(){var t=this;uni.showModal({title:"提示",content:"确定撤销售后申请吗？",success:function(){var e=(0,n.default)((0,s.default)().mark((function e(a){var i;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.confirm){e.next=13;break}return uni.showLoading({title:"处理中"}),e.prev=2,e.next=5,uni.$api("mall.php?action=cancel_refund","POST",{order_sn:t.order.order_sn});case 5:i=e.sent,uni.hideLoading(),200==i.code?(uni.showToast({title:"撤销成功"}),t.loadDetail()):uni.showToast({title:i.message,icon:"none"}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),uni.hideLoading();case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()})},previewImage:function(t){uni.previewImage({urls:[t]})},loadDetail:function(){var t=this;return(0,n.default)((0,s.default)().mark((function e(){var a;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,uni.$api("mall.php?action=order_detail&id=".concat(t.id));case 3:a=e.sent,200==a.code&&(t.order=a.data,t.address=a.data.receiver_info||{}),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},payOrder:function(){uni.showToast({title:"跳转支付...",icon:"none"})},cancelOrder:function(){uni.showToast({title:"功能开发中",icon:"none"})},confirmReceipt:function(){var t=this;uni.showModal({title:"确认收货",content:"确认已收到商品？",success:function(){var e=(0,n.default)((0,s.default)().mark((function e(a){var i;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.confirm){e.next=14;break}return uni.showLoading({title:"处理中"}),e.prev=2,e.next=5,uni.$api("mall.php?action=confirm_receipt","POST",{id:t.id});case 5:i=e.sent,uni.hideLoading(),200==i.code?(uni.showToast({title:"确认成功"}),t.loadDetail()):uni.showToast({title:i.message||"操作失败",icon:"none"}),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),uni.hideLoading(),uni.showToast({title:"网络错误",icon:"none"});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()})}}};e.default=o},5602:function(t,e,a){"use strict";a.r(e);var i=a("460f"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},"962e":function(t,e,a){"use strict";a.r(e);var i=a("0550"),s=a("5602");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("aef4");var o=a("828b"),r=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"7c6af0e0",null,!1,i["a"],void 0);e["default"]=r.exports},"9c49":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".container[data-v-7c6af0e0]{padding:10px;padding-bottom:80px;background:#f5f5f5;min-height:100vh;box-sizing:border-box}.header-status[data-v-7c6af0e0]{background:linear-gradient(90deg,#ff9000,#ff5000);color:#fff;padding:30px 20px;margin:-10px -10px 10px -10px;padding-bottom:40px}.status-title[data-v-7c6af0e0]{font-size:18px;font-weight:700;margin-bottom:5px}.status-desc[data-v-7c6af0e0]{font-size:12px;opacity:.9}.card[data-v-7c6af0e0]{background:#fff;border-radius:10px;margin-bottom:10px;padding:15px}\n\n/* Address */.address-card[data-v-7c6af0e0]{display:flex;align-items:center;margin-top:-30px;position:relative;z-index:1}.a-icon[data-v-7c6af0e0]{margin-right:15px;color:#ff5000;font-size:20px}.user-row[data-v-7c6af0e0]{font-size:16px;font-weight:700;margin-bottom:5px}.user-row .mobile[data-v-7c6af0e0]{font-size:14px;color:#666;font-weight:400;margin-left:10px}.addr-text[data-v-7c6af0e0]{font-size:13px;color:#333;line-height:1.4}\n\n/* Logistics */.logistics-card[data-v-7c6af0e0]{display:flex;align-items:center;margin-top:-30px;position:relative;z-index:1}.logistics-card + .address-card[data-v-7c6af0e0]{margin-top:10px}\n\n/* If both exist, fix margin */.l-icon[data-v-7c6af0e0]{margin-right:15px;color:#07c160;font-size:20px}.l-info[data-v-7c6af0e0]{font-size:13px}.l-company[data-v-7c6af0e0]{font-weight:700;margin-bottom:2px}.l-no[data-v-7c6af0e0]{color:#666;margin-bottom:2px}.l-time[data-v-7c6af0e0]{color:#999;font-size:12px}\n\n/* Goods */.goods-item[data-v-7c6af0e0]{display:flex;margin-bottom:15px}.g-img[data-v-7c6af0e0]{width:80px;height:80px;border-radius:6px;background:#eee;margin-right:10px}.g-info[data-v-7c6af0e0]{flex:1;display:flex;flex-direction:column;justify-content:space-between;height:80px}.g-title[data-v-7c6af0e0]{font-size:14px;color:#333;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.g-meta[data-v-7c6af0e0]{display:flex;justify-content:space-between;align-items:center}.g-price[data-v-7c6af0e0]{font-size:14px;color:#333}.g-num[data-v-7c6af0e0]{font-size:12px;color:#999}.goods-total[data-v-7c6af0e0]{border-top:1px solid #f9f9f9;padding-top:10px;text-align:right;display:flex;justify-content:flex-end;align-items:center;font-size:14px}.price-big[data-v-7c6af0e0]{font-size:18px;color:#ff5000;font-weight:700;margin-left:5px}\n\n/* Info */.info-row[data-v-7c6af0e0]{display:flex;justify-content:space-between;padding:8px 0;font-size:13px;color:#666}\n\n/* Footer */.footer-actions[data-v-7c6af0e0]{position:fixed;bottom:0;left:0;width:100%;background:#fff;padding:10px 15px;box-shadow:0 -1px 5px rgba(0,0,0,.05);display:flex;justify-content:flex-end;box-sizing:border-box}.btn[data-v-7c6af0e0]{padding:6px 18px;border-radius:20px;font-size:13px;margin-left:10px}.btn.outline[data-v-7c6af0e0]{border:1px solid #ddd;color:#666}.btn.primary[data-v-7c6af0e0]{background:#ff5000;color:#fff;border:1px solid #ff5000}.as-title[data-v-7c6af0e0]{font-weight:700;font-size:15px;margin-bottom:10px;color:#333;border-bottom:1px solid #f9f9f9;padding-bottom:8px}.status-text[data-v-7c6af0e0]{color:#ff5000;font-weight:700}.highlight[data-v-7c6af0e0]{color:#ff5000}.as-card + .address-card[data-v-7c6af0e0]{margin-top:10px}.as-imgs[data-v-7c6af0e0]{display:flex;flex-wrap:wrap;margin-top:10px}.as-imgs uni-image[data-v-7c6af0e0]{width:60px;height:60px;border-radius:4px;margin-right:10px;margin-bottom:10px;background:#f0f0f0}.as-actions[data-v-7c6af0e0]{display:flex;justify-content:flex-end;border-top:1px solid #f9f9f9;padding-top:10px;margin-top:5px}.btn.small[data-v-7c6af0e0]{font-size:12px;padding:4px 12px;height:auto;border-radius:15px}",""]),t.exports=e},aef4:function(t,e,a){"use strict";var i=a("200f"),s=a.n(i);s.a}}]);