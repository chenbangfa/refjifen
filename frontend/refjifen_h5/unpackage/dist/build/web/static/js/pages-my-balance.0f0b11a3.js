(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-balance"],{"5c67":function(t,a,e){"use strict";var n=e("d239"),i=e.n(n);i.a},6971:function(t,a,e){"use strict";e.r(a);var n=e("fbf1"),i=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a},"6ece":function(t,a,e){var n=e("c86c");a=n(!1),a.push([t.i,".container[data-v-03e22ec0]{padding:15px}.balance-card[data-v-03e22ec0]{background:#07c160;color:#fff;padding:30px 20px;border-radius:12px;text-align:center;margin-bottom:20px;box-shadow:0 4px 12px rgba(7,193,96,.3)}.balance-card .label[data-v-03e22ec0]{font-size:14px;opacity:.9;margin-bottom:10px}.balance-card .amount[data-v-03e22ec0]{font-size:36px;font-weight:700;margin-bottom:20px}.btn-row[data-v-03e22ec0]{display:flex;justify-content:center;gap:15px}.btn[data-v-03e22ec0]{background:#fff;color:#07c160;padding:8px 30px;border-radius:20px;font-size:14px;font-weight:700}.btn.outline[data-v-03e22ec0]{background:transparent;border:1px solid #fff;color:#fff}.menu-list[data-v-03e22ec0]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 10px rgba(0,0,0,.05)}.menu-item[data-v-03e22ec0]{padding:15px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #f5f5f5;font-size:16px;color:#333}.menu-item[data-v-03e22ec0]:last-child{border-bottom:none}.menu-item[data-v-03e22ec0]:active{background:#f9f9f9}.menu-left[data-v-03e22ec0]{display:flex;align-items:center}.menu-right[data-v-03e22ec0]{display:flex;align-items:center;color:#999}.menu-icon[data-v-03e22ec0]{font-size:20px;margin-right:10px}.modal-mask[data-v-03e22ec0]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999;display:flex;justify-content:center;align-items:center}.modal-content[data-v-03e22ec0]{background:#fff;width:75%;padding:25px;border-radius:16px;text-align:center}.modal-title[data-v-03e22ec0]{font-size:18px;font-weight:700;margin-bottom:20px;color:#333}.input[data-v-03e22ec0]{background:#f5f5f5;padding:10px;border-radius:8px;margin-bottom:15px;text-align:left;font-size:14px;height:40px}.modal-btn[data-v-03e22ec0]{background:#07c160;color:#fff;padding:12px;border-radius:8px;font-size:16px;margin-top:10px}.tabs[data-v-03e22ec0]{display:flex;margin-bottom:15px;border-bottom:1px solid #eee}.tab[data-v-03e22ec0]{flex:1;padding:10px 0;font-size:14px;color:#666}.tab.active[data-v-03e22ec0]{color:#07c160;border-bottom:2px solid #07c160;font-weight:700}.upload-box[data-v-03e22ec0]{width:100%;height:150px;background:#f5f5f5;border-radius:8px;display:flex;align-items:center;justify-content:center;margin-bottom:15px;border:1px dashed #ccc}.upload-tip[data-v-03e22ec0]{color:#999;display:flex;flex-direction:column;align-items:center}.preview[data-v-03e22ec0]{width:100%;height:100%;border-radius:8px}.recharge-info[data-v-03e22ec0]{text-align:left;margin:10px 0;color:#555;font-size:14px;line-height:1.8}",""]),t.exports=a},"6f1a":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"balance-card"},[e("v-uni-view",{staticClass:"label"},[t._v("当前余额")]),e("v-uni-view",{staticClass:"amount"},[t._v(t._s(t.fmt(t.user.balance)))]),e("v-uni-view",{staticClass:"btn-row"},[e("v-uni-view",{staticClass:"btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goService.apply(void 0,arguments)}}},[t._v("客服")]),e("v-uni-view",{staticClass:"btn outline",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goWithdraw.apply(void 0,arguments)}}},[t._v("提现")])],1)],1),e("v-uni-view",{staticClass:"menu-list"},[t._e(),e("v-uni-view",{staticClass:"menu-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goTransactions.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"menu-left"},[e("v-uni-text",{staticClass:"iconfont icon-file-text menu-icon",staticStyle:{color:"#faad14"}}),e("v-uni-text",[t._v("资金明细")])],1),e("v-uni-view",{staticClass:"menu-right"},[e("v-uni-text",{staticClass:"iconfont icon-right arrow"})],1)],1)],1),t.showTransfer?e("v-uni-view",{staticClass:"modal-mask",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showTransfer=!1}}},[e("v-uni-view",{staticClass:"modal-content",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a)}}},[e("v-uni-view",{staticClass:"modal-title"},[t._v("站内转账")]),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"对方ID",type:"number"},model:{value:t.transferForm.target_id,callback:function(a){t.$set(t.transferForm,"target_id",a)},expression:"transferForm.target_id"}}),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"对方姓名"},model:{value:t.transferForm.target_name,callback:function(a){t.$set(t.transferForm,"target_name",a)},expression:"transferForm.target_name"}}),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"对方手机号",type:"number",maxlength:"11"},model:{value:t.transferForm.target_mobile,callback:function(a){t.$set(t.transferForm,"target_mobile",a)},expression:"transferForm.target_mobile"}}),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"转账金额 (200的倍数)",type:"number"},model:{value:t.transferForm.amount,callback:function(a){t.$set(t.transferForm,"amount",a)},expression:"transferForm.amount"}}),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"支付密码",password:!0,type:"number",maxlength:"6"},model:{value:t.transferForm.pay_password,callback:function(a){t.$set(t.transferForm,"pay_password",a)},expression:"transferForm.pay_password"}}),e("v-uni-view",{staticClass:"modal-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.doTransfer.apply(void 0,arguments)}}},[t._v("确认转账")])],1)],1):t._e(),t.showWithdrawModal?e("v-uni-view",{staticClass:"modal-mask",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showWithdrawModal=!1}}},[e("v-uni-view",{staticClass:"modal-content",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a)}}},[e("v-uni-view",{staticClass:"modal-title"},[t._v("申请提现")]),e("v-uni-view",{staticClass:"tabs"},[e("v-uni-view",{class:["tab","bank"==t.withdrawForm.method?"active":""],on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.withdrawForm.method="bank"}}},[t._v("银行卡")]),e("v-uni-view",{class:["tab","alipay"==t.withdrawForm.method?"active":""],on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.withdrawForm.method="alipay"}}},[t._v("支付宝")]),e("v-uni-view",{class:["tab","wechat"==t.withdrawForm.method?"active":""],on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.withdrawForm.method="wechat"}}},[t._v("微信")])],1),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"提现金额 (100的倍数)",type:"number"},model:{value:t.withdrawForm.amount,callback:function(a){t.$set(t.withdrawForm,"amount",a)},expression:"withdrawForm.amount"}}),e("v-uni-view",{staticStyle:{"font-size":"12px",color:"#f56c6c","margin-bottom":"15px"}},[t._v("注：提现收取8%手续费，即提现100元实际到账92元")]),"bank"==t.withdrawForm.method?[e("v-uni-input",{staticClass:"input",attrs:{placeholder:"收款人姓名"},model:{value:t.withdrawForm.details.realname,callback:function(a){t.$set(t.withdrawForm.details,"realname",a)},expression:"withdrawForm.details.realname"}}),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"开户行名称"},model:{value:t.withdrawForm.details.bank_name,callback:function(a){t.$set(t.withdrawForm.details,"bank_name",a)},expression:"withdrawForm.details.bank_name"}}),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"银行卡号",type:"number"},model:{value:t.withdrawForm.details.account_number,callback:function(a){t.$set(t.withdrawForm.details,"account_number",a)},expression:"withdrawForm.details.account_number"}})]:t._e(),"alipay"==t.withdrawForm.method||"wechat"==t.withdrawForm.method?[e("v-uni-input",{staticClass:"input",attrs:{placeholder:"收款人姓名"},model:{value:t.withdrawForm.details.realname,callback:function(a){t.$set(t.withdrawForm.details,"realname",a)},expression:"withdrawForm.details.realname"}}),"alipay"==t.withdrawForm.method?e("v-uni-input",{staticClass:"input",attrs:{placeholder:"支付宝账号"},model:{value:t.withdrawForm.details.alipay_account,callback:function(a){t.$set(t.withdrawForm.details,"alipay_account",a)},expression:"withdrawForm.details.alipay_account"}}):t._e(),"wechat"==t.withdrawForm.method?e("v-uni-input",{staticClass:"input",attrs:{placeholder:"微信号"},model:{value:t.withdrawForm.details.wechat_account,callback:function(a){t.$set(t.withdrawForm.details,"wechat_account",a)},expression:"withdrawForm.details.wechat_account"}}):t._e(),e("v-uni-view",{staticClass:"upload-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseImage.apply(void 0,arguments)}}},[t.localImg?e("v-uni-image",{staticClass:"preview",attrs:{src:t.localImg}}):e("v-uni-view",{staticClass:"upload-tip"},[e("v-uni-text",{staticClass:"iconfont icon-plus"}),e("v-uni-text",[t._v("上传收款码")])],1)],1)]:t._e(),e("v-uni-input",{staticClass:"input",attrs:{placeholder:"支付密码",password:!0,type:"number",maxlength:"6"},model:{value:t.withdrawForm.pay_password,callback:function(a){t.$set(t.withdrawForm,"pay_password",a)},expression:"withdrawForm.pay_password"}}),e("v-uni-view",{staticClass:"modal-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.doWithdraw.apply(void 0,arguments)}}},[t._v("确认提现")])],2)],1):t._e(),t.showRechargeModal?e("v-uni-view",{staticClass:"modal-mask",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showRechargeModal=!1}}},[e("v-uni-view",{staticClass:"modal-content",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a)}}},[e("v-uni-view",{staticClass:"modal-title"},[t._v("在线充值")]),e("v-uni-view",{staticClass:"recharge-info"},[e("v-uni-view",[t._v("公司账户：2402018409200341260")]),e("v-uni-view",[t._v("开户银行：中国工商银行股份有限公司阳金桥支行")]),e("v-uni-view",[t._v("公司户名：贵州豪熠商贸有限公司")]),e("v-uni-view",{staticStyle:{"margin-top":"10px",color:"#f00"}},[t._v("充值请备注手机号")])],1),e("v-uni-view",{staticClass:"modal-btn",staticStyle:{"margin-top":"20px"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showRechargeModal=!1}}},[t._v("我知道了")])],1)],1):t._e()],1)},i=[]},d239:function(t,a,e){var n=e("6ece");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("967d").default;i("7478246d",n,!0,{sourceMap:!1,shadowMode:!1})},d8f4:function(t,a,e){"use strict";e.r(a);var n=e("6f1a"),i=e("6971");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);e("5c67");var r=e("828b"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"03e22ec0",null,!1,n["a"],void 0);a["default"]=s.exports},fbf1:function(t,a,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(e("2634")),o=n(e("2fdc"));e("e838");var r={data:function(){return{user:{},showTransfer:!1,showWithdrawModal:!1,showRechargeModal:!1,transferForm:{target_id:"",target_name:"",target_mobile:"",amount:"",pay_password:""},withdrawForm:{amount:"",method:"bank",pay_password:"",details:{realname:"",bank_name:"",account_number:"",alipay_account:"",wechat_account:"",image_url:""}},localImg:""}},onShow:function(){this.fetchInfo()},methods:{fmt:function(t){return parseFloat(t||0).toFixed(2)},fetchInfo:function(){var t=this;return(0,o.default)((0,i.default)().mark((function a(){var e;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,uni.$api("account.php?action=info");case 3:e=a.sent,200==e.code&&(t.user=e.data),a.next=9;break;case 7:a.prev=7,a.t0=a["catch"](0);case 9:case"end":return a.stop()}}),a,null,[[0,7]])})))()},openTransfer:function(){this.user.has_pay_password?this.showTransfer=!0:uni.showModal({title:"提示",content:"请先设置支付密码",confirmText:"去设置",success:function(t){t.confirm&&uni.navigateTo({url:"/pages/my/pay_password"})}})},goTransactions:function(){uni.navigateTo({url:"/pages/my/transactions"})},goWithdraw:function(){this.user.has_pay_password?this.showWithdrawModal=!0:uni.showModal({title:"提示",content:"请先设置支付密码",confirmText:"去设置",success:function(t){t.confirm&&uni.navigateTo({url:"/pages/my/pay_password"})}})},goService:function(){uni.navigateTo({url:"/pages/service/chat"})},doTransfer:function(){var t=this;return(0,o.default)((0,i.default)().mark((function a(){var e;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.transferForm.target_id&&t.transferForm.target_name&&t.transferForm.target_mobile&&t.transferForm.amount&&t.transferForm.pay_password){a.next=3;break}return uni.showToast({title:"请填写完整信息",icon:"none"}),a.abrupt("return");case 3:return uni.showLoading({title:"提交中"}),a.prev=4,a.next=7,uni.$api("assets.php?action=transfer","POST",t.transferForm);case 7:e=a.sent,uni.hideLoading(),200==e.code?(uni.showToast({title:"转账成功"}),t.showTransfer=!1,t.fetchInfo()):uni.showToast({title:e.message,icon:"none"}),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](4),uni.hideLoading();case 15:case"end":return a.stop()}}),a,null,[[4,12]])})))()},chooseImage:function(){var t=this;uni.chooseImage({count:1,success:function(a){var e=a.tempFilePaths[0];t.localImg=e,uni.showLoading({title:"上传中..."}),uni.uploadFile({url:"https://ref.tajian.cc/backend/api/upload.php",filePath:e,name:"file",header:{Authorization:"Bearer "+uni.getStorageSync("token")},success:function(a){uni.hideLoading();try{var e=JSON.parse(a.data);200==e.code?(t.withdrawForm.details.image_url=e.url,uni.showToast({title:"收款码上传成功"})):uni.showToast({title:e.message||"上传失败",icon:"none"})}catch(n){uni.showToast({title:"上传响应解析失败",icon:"none"})}},fail:function(){uni.hideLoading(),uni.showToast({title:"上传请求失败",icon:"none"})}})}})},doWithdraw:function(){var t=this;return(0,o.default)((0,i.default)().mark((function a(){var e;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.withdrawForm.amount&&t.withdrawForm.pay_password){a.next=3;break}return uni.showToast({title:"请填写完整",icon:"none"}),a.abrupt("return");case 3:if("bank"!=t.withdrawForm.method){a.next=9;break}if(t.withdrawForm.details.realname&&t.withdrawForm.details.bank_name&&t.withdrawForm.details.account_number){a.next=7;break}return uni.showToast({title:"请填写银行卡信息",icon:"none"}),a.abrupt("return");case 7:a.next=21;break;case 9:if(t.withdrawForm.details.realname){a.next=12;break}return uni.showToast({title:"请填写收款人姓名",icon:"none"}),a.abrupt("return");case 12:if("alipay"!=t.withdrawForm.method||t.withdrawForm.details.alipay_account){a.next=15;break}return uni.showToast({title:"请填写支付宝账号",icon:"none"}),a.abrupt("return");case 15:if("wechat"!=t.withdrawForm.method||t.withdrawForm.details.wechat_account){a.next=18;break}return uni.showToast({title:"请填写微信号",icon:"none"}),a.abrupt("return");case 18:if(t.withdrawForm.details.image_url){a.next=21;break}return uni.showToast({title:"请上传收款码",icon:"none"}),a.abrupt("return");case 21:return uni.showLoading({title:"申请中"}),a.prev=22,a.next=25,uni.$api("assets.php?action=withdraw","POST",t.withdrawForm);case 25:e=a.sent,uni.hideLoading(),200==e.code?(uni.showToast({title:"申请成功"}),t.showWithdrawModal=!1,t.fetchInfo()):uni.showToast({title:e.message,icon:"none"}),a.next=33;break;case 30:a.prev=30,a.t0=a["catch"](22),uni.hideLoading();case 33:case"end":return a.stop()}}),a,null,[[22,30]])})))()}}};a.default=r}}]);